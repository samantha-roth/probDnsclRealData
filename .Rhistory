data <- data.frame(
Approach = c("Mean absolute error", "95% prediction interval coverage", "Percent of flooded and nonflooded cells correctly identified"),
PDFlood = c(MAE, PI95accuracy, accuracy),
CostGrow = c(1, NA, 30)
)
# Print the table
print(data)
rm(list=ls())
library(terra)
costgrow_WSE<- rast("data/costgrow10mto5m_methodArea1.tif")
#plot(costgrow_WSE)
dem5m<- rast("data/norristown_5m.asc")
elev5m<- values(dem5m)
coords.costgrow<- xyFromCell(costgrow_WSE,1:ncell(costgrow_WSE))
coords.dem5m<- xyFromCell(dem5m,1:ncell(dem5m))
cgvals10mto5m<- values(costgrow_WSE)
wshCostGrow10mto5mVals<- cgvals10mto5m-elev5m
wshCostGrow10mto5mVals[which(is.na(wshCostGrow10mto5mVals))]<-0
wshCostGrow10mto5m<- dem5m
values(wshCostGrow10mto5m)<- wshCostGrow10mto5mVals
plot(wshCostGrow10mto5m)
################################################################################
#crop to area of interest and compare to 5m projections
#load region of interest coordinates
load("data/boxAroundHWMs.5m.RData")
wshCostGrow<- c(as.matrix(extract(wshCostGrow10mto5m,coordsinBds.5m)))
run5m<- rast("data/Outputs5m/Run_1.asc")
wsh5m<- c(as.matrix(extract(run5m,coordsinBds.5m)))
MAE.costgrow<- mean(abs(wsh5m-wshCostGrow)) #.144, slightly higher than ours
print(paste0("CostGrow MAE: ", MAE.costgrow))
floodedCostGrow<- ifelse(wshCostGrow>0,1,0)
flooded5m<- ifelse(wsh5m>0,1,0)
TPR<- length(which(floodedCostGrow==1 & flooded5m==1))/length(which(flooded5m==1))
TNR<- length(which(floodedCostGrow==0 & flooded5m==0))/length(which(flooded5m==0))
################################################################################
#now set the minimum threshold for flooding to be 0.3
floodedCostGrow<- ifelse(wshCostGrow>0.3,1,0)
flooded5m<- ifelse(wsh5m>0.3,1,0)
TPR<- length(which(floodedCostGrow==1 & flooded5m==1))/length(which(flooded5m==1))
TNR<- length(which(floodedCostGrow==0 & flooded5m==0))/length(which(flooded5m==0))
print(paste0("CostGrow total sensitivity for .3m flood: ", TPR))
print(paste0("CostGrow total specificity for .3m flood: ", TNR))
accuracy<- (length(which(floodedCostGrow==1 & flooded5m==1)) + length(which(floodedCostGrow==0 & flooded5m==0)))/length(flooded5m)
print(paste0("CostGrow total accuracy for .3m flood: ", accuracy))
save(MAE.costgrow,accuracy,TPR,TNRfile="data/CostGrowMAEaccuracyTPRTNR.RData")
rm(list=ls())
library(terra)
rm(list=ls())
library(terra)
dir<- commandArgs(trailingOnly=TRUE)
setwd(dir)
rm(list=ls())
library(terra)
costgrow_WSE<- rast("data/costgrow10mto5m_methodArea1.tif")
#plot(costgrow_WSE)
dem5m<- rast("data/norristown_5m.asc")
elev5m<- values(dem5m)
coords.costgrow<- xyFromCell(costgrow_WSE,1:ncell(costgrow_WSE))
coords.dem5m<- xyFromCell(dem5m,1:ncell(dem5m))
cgvals10mto5m<- values(costgrow_WSE)
wshCostGrow10mto5mVals<- cgvals10mto5m-elev5m
wshCostGrow10mto5mVals[which(is.na(wshCostGrow10mto5mVals))]<-0
wshCostGrow10mto5m<- dem5m
values(wshCostGrow10mto5m)<- wshCostGrow10mto5mVals
plot(wshCostGrow10mto5m)
################################################################################
#crop to area of interest and compare to 5m projections
#load region of interest coordinates
load("data/boxAroundHWMs.5m.RData")
wshCostGrow<- c(as.matrix(extract(wshCostGrow10mto5m,coordsinBds.5m)))
run5m<- rast("data/Outputs5m/Run_1.asc")
wsh5m<- c(as.matrix(extract(run5m,coordsinBds.5m)))
MAE.costgrow<- mean(abs(wsh5m-wshCostGrow)) #.144, slightly higher than ours
print(paste0("CostGrow MAE: ", MAE.costgrow))
floodedCostGrow<- ifelse(wshCostGrow>0,1,0)
flooded5m<- ifelse(wsh5m>0,1,0)
sens.costgrow<- length(which(floodedCostGrow==1 & flooded5m==1))/length(which(flooded5m==1))
spec.costgrow<- length(which(floodedCostGrow==0 & flooded5m==0))/length(which(flooded5m==0))
################################################################################
#now set the minimum threshold for flooding to be 0.3
floodedCostGrow<- ifelse(wshCostGrow>0.3,1,0)
flooded5m<- ifelse(wsh5m>0.3,1,0)
sens.costgrow<- length(which(floodedCostGrow==1 & flooded5m==1))/length(which(flooded5m==1))
spec.costgrow<- length(which(floodedCostGrow==0 & flooded5m==0))/length(which(flooded5m==0))
print(paste0("CostGrow total sensitivity for .3m flood: ", sens.costgrow))
print(paste0("CostGrow total specificity for .3m flood: ", spec.costgrow))
accuracy.costgrow<- (length(which(floodedCostGrow==1 & flooded5m==1)) + length(which(floodedCostGrow==0 & flooded5m==0)))/length(flooded5m)
print(paste0("CostGrow total accuracy for .3m flood: ", accuracy.costgrow))
save(MAE.costgrow,accuracy.costgrow,sens.costgrow,spec.costgrow,file="data/CostGrowMAEaccuracysens.costgrowspec.costgrow.RData")
save(MAE.costgrow,accuracy.costgrow,sens.costgrow,spec.costgrow,file="data/CostGrowMAEaccuracySensSpec.RData")
rm(list=ls())
graphics.off()
dir<- commandArgs(trailingOnly=TRUE)
setwd(dir)
rm(list=ls())
graphics.off()
load("data/PI95accuracyMAE.RData")
load("data/totalSensSpecAccuracy.RData")
load("data/CostGrowMAEaccuracySensSpec.RData")
print(paste0("The reported of MAE for PDFlood is 0.13 m. The value of MAE that you obtained is ",round(MAE,2)," m."))
print(paste0("The reported of 95% predictional interval coverage for PDFlood is 98%. The 95% prediction interval coverage that you obtained is ",round(PI95accuracy,2)*100,"%."))
print(paste0("The reported percent of flooded and non flooded cells correctly identified by PDFlood is 96%. The percent that you obtained is ",round(accuracy,2)*100,"%."))
print(paste0("The reported percent of flooded cells correctly identified by PDFlood is 93%. The percent that you obtained is ",round(totalSens,2)*100,"%."))
print(paste0("The reported percent of nonflooded cells correctly identified by PDFlood is 100%. The percent that you obtained is ",round(totalSpec,2)*100,"%."))
# Create sample data
data <- data.frame(
Approach = c("Mean absolute error", "95% prediction interval coverage", "Percent of flooded and nonflooded cells correctly identified"),
PDFlood = c(MAE, PI95accuracy, accuracy),
CostGrow = c(MAE.costgrow, NA, accuracy.costgrow)
)
# Print the table
print(data)
data <- data.frame(
Approach = c("Mean absolute error", "95% prediction interval coverage", "Percent of flooded and nonflooded cells correctly identified"),
PDFlood = c(round(MAE,2), round(PI95accuracy,2)*100, round(accuracy,2)*100),
CostGrow = c(round(MAE.costgrow,2), NA, round(accuracy.costgrow,2)*100)
)
print(data)
jpeg(filename="plots/table3.jpeg",width=600,height=500)
print(data)
dev.off()
#Table 5
data <- data.frame(
Approach = c("Percent of flooded cells correctly identified","Percent of nonflooded cells correctly identified"),
PDFlood = c(round(totalSens,2)*100,round(totalSpec,2)*100),
CostGrow = c(round(sens.costgrow,2)*100, round(spec.costgrow,2)*100)
)
#Table 3
table3 <- data.frame(
Approach = c("Mean absolute error", "95% prediction interval coverage", "Percent of flooded and nonflooded cells correctly identified"),
PDFlood = c(round(MAE,2), round(PI95accuracy,2)*100, round(accuracy,2)*100),
CostGrow = c(round(MAE.costgrow,2), NA, round(accuracy.costgrow,2)*100)
)
#jpeg(filename="plots/table3.jpeg",width=600,height=500)
print(table3)
#dev.off()
#Table 5
table5 <- data.frame(
Approach = c("Percent of flooded cells correctly identified","Percent of nonflooded cells correctly identified"),
PDFlood = c(round(totalSens,2)*100,round(totalSpec,2)*100),
CostGrow = c(round(sens.costgrow,2)*100, round(spec.costgrow,2)*100)
)
print(table5)
rm(list=ls())
flood<- c("flood2014","flood2020","floodfuture")
for(f in 1:length(flood)){
print(flood[f])
load(paste0("data/",flood[f],"/wetCellAccuracy_.3mflood_10mto5m.RData"))
nWetFlood<- nFlood
nWetNoFlood<- nNoFlood
nSens_LRW<- sens_LRW*nFlood
nSpec_LRW<- spec_LRW*nNoFlood
load(paste0("data/",flood[f],"/estProb.3mFloodIndsofInterest_10mto5mElev_QGIS.RData"))
nDryFlood<- lenFlood
nDryNoFlood<- lenNotFlood
nSens_LRD<- length(indsFloodCorrect)
nSpec_LRD<- length(indsNotFloodCorrect)
totalSens<- (nSens_LRW + nSens_LRD)/(nWetFlood+nDryFlood)
print(paste0("sensitivity: ", totalSens)) #0.9326279
totalSpec<- (nSpec_LRW + nSpec_LRD)/(nWetNoFlood+nDryNoFlood)
print(paste0("specificity: ", totalSpec)) #0.9897557
nDryFlood + nDryNoFlood
nWetFlood + nWetNoFlood
totAcc<- (nSens_LRW + nSens_LRD + nSpec_LRW + nSpec_LRD)/(nWetFlood+nDryFlood + nWetNoFlood+nDryNoFlood)
print(paste0("total accuracy: ",totAcc))
save(totalSens,totalSpec,totAcc,file=paste0("data/",flood[f],"/SensSpecAccuracy_.3mflood.RData"))
}
#get the total MAE and sensitivity for 10m resolution being downscaled to 5m resolution
rm(list=ls())
library(terra)
dir<- commandArgs(trailingOnly=TRUE)
setwd(dir)
rm(list=ls())
library(terra)
flood<- c("flood2014","flood2020","floodfuture")
for(f in 1:length(flood)){
print(flood[f])
################################################################################
#% in 95% PI bounds for wet cells
load(paste0("data/",flood[f],"/bdsdownscale10mto5mAroundHWMs.RData"))
#load flooded locations at the two lower resolutions being downscaled
load(paste0("data/",flood[f],"/floodInds10mat5mAroundHWMs.RData"))
#load region of interest coordinates
load("data/boxAroundHWMs.5m.RData")
#load calibrated 5m flood projections in region of interest
load(paste0("data/",flood[f],"/vals5minBdsAroundHWMs.RData"))
floodvals5mby10m<- vals5minBds[floodInds10mat5m]
isBtwn5mby10m<- rep(NA,length(floodvals5mby10m))
for(i in 1:length(floodvals5mby10m)){
isBtwn5mby10m[i]<- floodvals5mby10m[i]>=bdsBox10m[i,1] & floodvals5mby10m[i]<=bdsBox10m[i,2]
}
mean(isBtwn5mby10m) #0.9758621
################################################################################
#get MAE for wet cells
load(paste0("data/",flood[f],"/downscale10mto5mAroundHWMs.RData"))
#correlation
cor(downscale10m,floodvals5mby10m)
#MAE
mean(abs(downscale10m-floodvals5mby10m))
#MSE
mean((downscale10m-floodvals5mby10m)^2)
################################################################################
#get %in 95% PI bounds for dry cells
run5m<- rast(paste0("data/Outputs5m/",flood[f],"/Run_1.asc"))
coords.5m<- xyFromCell(run5m,1:ncell(run5m))
#load cells of interest outside the low res flooded cells
load(paste0("data/",flood[f],"/destInds10mat5m.RData"))
coords.5mDest<- coords.5m[destInds10m,]
#get the actual flood height at each destination location
trueDestFloodHeights<- c(as.matrix(extract(run5m,coords.5mDest)))
#load mean predictions at each cell
load(paste0("data/",flood[f],"/shiftbyelevdnsclMeanAtDests_10mto5mElev_QGIS.RData"))
#Now see if the mean lies with the center 95% of the distribution
#load the estimated variance from comparing the downscaled projs to the HWMs
load("data/varResHWM10mto5m.RData")
#load the mean from the nearest downscaled flooded cell
load(paste0("data/",flood[f],"/shiftbyelevdnsclFromSourceToDest10mto5m_QGIS.RData"))
#what's the maximum number that should be plugged into the CDF?
upper<- max(meanFromSourceToDest)+ 3*sqrt(varResHWM10m)
valsToTest<- seq(0,round(upper+.01,2),by=.01)
load(paste0("data/",flood[f],"/shiftbyelevdnsclCDFmat_10mto5mElev_QGIS.RData"))
#95% confidence interval
CI95mat<- matrix(NA,nrow= nrow(CDFmat), ncol=2)
for(i in 1:nrow(CDFmat)){
CI95mat[i,1]<- valsToTest[min(which(CDFmat[i,]>=.05))]
CI95mat[i,2]<- valsToTest[min(which(CDFmat[i,]>=.95))]
}
inCI95Bds<- rep(NA,length(trueDestFloodHeights))
for(i in 1:length(trueDestFloodHeights)){
if(trueDestFloodHeights[i]>=CI95mat[i,1] & trueDestFloodHeights[i]<=CI95mat[i,2]){
inCI95Bds[i]<- 1}
else{
inCI95Bds[i]<- 0}
}
#what % of the time is the truth within the 95% CI bounds?
mean(inCI95Bds) #0.9564926 #holy shit that's good
################################################################################
#get MAE for dry cells
#look at overall performance
#MAE
mean(abs(meanAtDests-trueDestFloodHeights)) #0.1531073
#MSE
mean((meanAtDests-trueDestFloodHeights)^2) #0.0525986
################################################################################
#total % within 95% PI bounds
PI95accuracy<- (sum(inCI95Bds)+ sum(isBtwn5mby10m))/(length(inCI95Bds)+ length(isBtwn5mby10m))
print(paste0("95% Prediction Interval Coverage: ", PI95accuracy))
MAE<- (sum(abs(meanAtDests-trueDestFloodHeights)) + sum(abs(downscale10m-floodvals5mby10m)))/(length(meanAtDests) + length(downscale10m))
print(paste0("MAE: ", MAE))
save(PI95accuracy,MAE,file=paste0("data/",flood[f],"/PI95accuracyMAE.RData"))
}
# "flood2014"
# "95% Prediction Interval Coverage: 0.980846697575435"
# "MAE: 0.0976865219590253"
# "flood2020"
# "95% Prediction Interval Coverage: 0.981074713080489"
# "MAE: 0.0939594490602081"
# "floodfuture"
# "95% Prediction Interval Coverage: 0.97689442882116"
# "MAE: 0.159626524733717"
rm(list=ls())
library(terra)
load("data/coords.5m.RData")
dem5m<- rast("data/norristown_5m.asc")
elev5m<- values(dem5m)
flood<- c("flood2014","flood2020","floodfuture")
for(f in 1:length(flood)){
print(flood[f])
#load water surface height downscaled by costgrow
CG_WSH<- rast(paste0("data/",flood[f],"/CG_WSH.tif"))
#load region of interest coordinates
load("data/boxAroundHWMs.5m.RData")
#load calibrated 5m flood projections in region of interest
load(paste0("data/",flood[f],"/vals5minBdsAroundHWMs.RData"))
wshCostGrow<- c(as.matrix(extract(CG_WSH,coordsinBds.5m)))
wshCostGrow[which(is.na(wshCostGrow))]<-0
MAE.costgrow<- mean(abs(vals5minBds-wshCostGrow)) #.144, slightly higher than ours
print(paste0("MAE: ",MAE.costgrow))
#floodedCostGrow<- ifelse(wshCostGrow>0,1,0)
#flooded5m<- ifelse(vals5minBds>0,1,0)
#sens.costgrow<- length(which(floodedCostGrow==1 & flooded5m==1))/length(which(flooded5m==1))
#spec.costgrow<- length(which(floodedCostGrow==0 & flooded5m==0))/length(which(flooded5m==0))
################################################################################
#now set the minimum threshold for flooding to be 0.3
floodedCostGrow<- ifelse(wshCostGrow>0.3,1,0)
flooded5m<- ifelse(vals5minBds>0.3,1,0)
sens.costgrow<- length(which(floodedCostGrow==1 & flooded5m==1))/length(which(flooded5m==1))
spec.costgrow<- length(which(floodedCostGrow==0 & flooded5m==0))/length(which(flooded5m==0))
print(paste0("sensitivity: ",sens.costgrow))
print(paste0("specificity: ",spec.costgrow))
accuracy.costgrow<- (length(which(floodedCostGrow==1 & flooded5m==1)) + length(which(floodedCostGrow==0 & flooded5m==0)))/length(flooded5m)
print(paste0("accuracy: ",accuracy.costgrow))
save(MAE.costgrow,accuracy.costgrow,sens.costgrow,spec.costgrow,file=paste0("data/",flood[f],"/CostGrowMAEaccuracySensSpec.RData"))
}
pwd
getwd()
rm(list=ls())
library(terra)
load("data/coords.5m.RData")
dem5m<- rast("data/norristown_5m.asc")
elev5m<- values(dem5m)
flood<- c("flood2014","flood2020","floodfuture")
f=1
print(flood[f])
#load water surface height downscaled by costgrow
CG_WSH<- rast(paste0("data/",flood[f],"/CG_WSH.tif"))
run<- rast(paste0("data/",flood[f],"/CG.tif"))
#subtract high resolution elevations from high resolution WSEs
rm(list=ls())
library(terra)
pt<- proc.time()
ndArgs(trailingOnly=TRUE)
rm(list=ls())
library(terra)
getwd()
run5m<- rast("data/Outputs5m/Run_1.asc")
dem5m<- rast("data/norristown_5m.asc")
load("data/coords.5m.RData")
elev5m<- c(as.matrix(extract(dem5m,coords.5m)))
flood<- c("flood2014","flood2020","floodfuture")
for(f in 1:length(flood)){
run<- rast(paste0("data/",flood[f],"/CG_",flood[f],".tif"))
WSE<- c(as.matrix(extract(run,coords.5m)))
WSH<- WSE- elev5m
WSH[which(WSH<0)]<-NA
WSHrast<- run5m
values(WSHrast)<- WSH
print(plot(WSHrast))
writeRaster(WSHrast,file=paste0("data/",flood[f],"/CG_WSH.tif"),overwrite=TRUE)
}
rm(list=ls())
library(terra)
load("data/coords.5m.RData")
dem5m<- rast("data/norristown_5m.asc")
elev5m<- values(dem5m)
flood<- c("flood2014","flood2020","floodfuture")
for(f in 1:length(flood)){
print(flood[f])
#load water surface height downscaled by costgrow
CG_WSH<- rast(paste0("data/",flood[f],"/CG_WSH.tif"))
#load region of interest coordinates
load("data/boxAroundHWMs.5m.RData")
#load calibrated 5m flood projections in region of interest
load(paste0("data/",flood[f],"/vals5minBdsAroundHWMs.RData"))
wshCostGrow<- c(as.matrix(extract(CG_WSH,coordsinBds.5m)))
wshCostGrow[which(is.na(wshCostGrow))]<-0
MAE.costgrow<- mean(abs(vals5minBds-wshCostGrow)) #.144, slightly higher than ours
print(paste0("MAE: ",MAE.costgrow))
#floodedCostGrow<- ifelse(wshCostGrow>0,1,0)
#flooded5m<- ifelse(vals5minBds>0,1,0)
#sens.costgrow<- length(which(floodedCostGrow==1 & flooded5m==1))/length(which(flooded5m==1))
#spec.costgrow<- length(which(floodedCostGrow==0 & flooded5m==0))/length(which(flooded5m==0))
################################################################################
#now set the minimum threshold for flooding to be 0.3
floodedCostGrow<- ifelse(wshCostGrow>0.3,1,0)
flooded5m<- ifelse(vals5minBds>0.3,1,0)
sens.costgrow<- length(which(floodedCostGrow==1 & flooded5m==1))/length(which(flooded5m==1))
spec.costgrow<- length(which(floodedCostGrow==0 & flooded5m==0))/length(which(flooded5m==0))
print(paste0("sensitivity: ",sens.costgrow))
print(paste0("specificity: ",spec.costgrow))
accuracy.costgrow<- (length(which(floodedCostGrow==1 & flooded5m==1)) + length(which(floodedCostGrow==0 & flooded5m==0)))/length(flooded5m)
print(paste0("accuracy: ",accuracy.costgrow))
save(MAE.costgrow,accuracy.costgrow,sens.costgrow,spec.costgrow,file=paste0("data/",flood[f],"/CostGrowMAEaccuracySensSpec.RData"))
}
rm(list=ls())
graphics.off()
flood<- c("flood2014","flood2020","floodfuture")
for(f in 1:length(flood)){
print(flood[f])
load(paste0("data/",flood[f],"/PI95accuracyMAE.RData"))
load(paste0("data/",flood[f],"/SensSpecAccuracy_.3mflood.RData"))
load(paste0("data/",flood[f],"/CostGrowMAEaccuracySensSpec.RData"))
#Table 4
table4 <- data.frame(
Approach = c("Mean absolute error", "95% prediction interval coverage", "Percent of flooded and nonflooded cells correctly identified"),
PDFlood = c(round(MAE,2), round(PI95accuracy,2)*100, round(accuracy,2)*100),
CostGrow = c(round(MAE.costgrow,2), NA, round(accuracy.costgrow,2)*100)
)
#jpeg(filename="plots/table3.jpeg",width=600,height=500)
print(table3)
#dev.off()
#Table 6
table6 <- data.frame(
Approach = c("Percent of flooded cells correctly identified","Percent of nonflooded cells correctly identified"),
PDFlood = c(round(totalSens,2)*100,round(totalSpec,2)*100),
CostGrow = c(round(sens.costgrow,2)*100, round(spec.costgrow,2)*100)
)
print(table5)
}
load(paste0("data/",flood[f],"/PI95accuracyMAE.RData"))
rm(list=ls())
graphics.off()
dir<- commandArgs(trailingOnly=TRUE)
setwd(dir)
flood<- c("flood2014","flood2020","floodfuture")
for(f in 1:length(flood)){
print(flood[f])
load(paste0("data/",flood[f],"/PI95accuracyMAE.RData"))
load(paste0("data/",flood[f],"/SensSpecAccuracy_.3mflood.RData"))
load(paste0("data/",flood[f],"/CostGrowMAEaccuracySensSpec.RData"))
#Table 4
table4 <- data.frame(
Approach = c("Mean absolute error", "95% prediction interval coverage", "Percent of flooded and nonflooded cells correctly identified"),
PDFlood = c(round(MAE,2), round(PI95accuracy,2)*100, round(totAcc,2)*100),
CostGrow = c(round(MAE.costgrow,2), NA, round(accuracy.costgrow,2)*100)
)
#jpeg(filename="plots/table3.jpeg",width=600,height=500)
print(table4)
#dev.off()
#Table 6
table6 <- data.frame(
Approach = c("Percent of flooded cells correctly identified","Percent of nonflooded cells correctly identified"),
PDFlood = c(round(totalSens,2)*100,round(totalSpec,2)*100),
CostGrow = c(round(sens.costgrow,2)*100, round(spec.costgrow,2)*100)
)
print(table6)
}
rm(list=ls())
graphics.off()
dir<- commandArgs(trailingOnly=TRUE)
setwd(dir)
flood<- c("flood2014","flood2020","floodfuture")
for(f in 1:length(flood)){
print(flood[f])
load(paste0("data/",flood[f],"/PI95accuracyMAE.RData"))
load(paste0("data/",flood[f],"/SensSpecAccuracy_.3mflood.RData"))
load(paste0("data/",flood[f],"/CostGrowMAEaccuracySensSpec.RData"))
#Table 4
table4 <- data.frame(
Approach = c("Mean absolute error", "95% prediction interval coverage", "Percent of flooded and nonflooded cells correctly identified"),
PDFlood = c(round(MAE,2), round(PI95accuracy,2)*100, round(totAcc,2)*100),
CostGrow = c(round(MAE.costgrow,2), NA, round(accuracy.costgrow,2)*100)
)
#jpeg(filename="plots/table3.jpeg",width=600,height=500)
print(paste0("Table 4-", flood[f]))
print(table4)
#dev.off()
#Table 6
table6 <- data.frame(
Approach = c("Percent of flooded cells correctly identified","Percent of nonflooded cells correctly identified"),
PDFlood = c(round(totalSens,2)*100,round(totalSpec,2)*100),
CostGrow = c(round(sens.costgrow,2)*100, round(spec.costgrow,2)*100)
)
print(paste0("Table 6-", flood[f]))
print(table6)
}
rm(list=ls())
graphics.off()
for(f in 1:length(flood)){
load(paste0("data/",flood[f],"/PI95accuracyMAE.RData"))
load(paste0("data/",flood[f],"/SensSpecAccuracy_.3mflood.RData"))
load(paste0("data/",flood[f],"/CostGrowMAEaccuracySensSpec.RData"))
#Table 4
table4 <- data.frame(
Approach = c("Mean absolute error", "95% prediction interval coverage", "Percent of flooded and nonflooded cells correctly identified"),
PDFlood = c(round(MAE,2), round(PI95accuracy,2)*100, round(totAcc,2)*100),
CostGrow = c(round(MAE.costgrow,2), NA, round(accuracy.costgrow,2)*100)
)
jpeg(filename=paste0("plots/",flood[f],"/table3.jpeg"),width=600,height=500)
dev.new()
print(paste0("Table 4-", flood[f]))
print(table4)
dev.off()
}
flood<- c("flood2014","flood2020","floodfuture")
for(f in 1:length(flood)){
load(paste0("data/",flood[f],"/PI95accuracyMAE.RData"))
load(paste0("data/",flood[f],"/SensSpecAccuracy_.3mflood.RData"))
load(paste0("data/",flood[f],"/CostGrowMAEaccuracySensSpec.RData"))
#Table 4
table4 <- data.frame(
Approach = c("Mean absolute error", "95% prediction interval coverage", "Percent of flooded and nonflooded cells correctly identified"),
PDFlood = c(round(MAE,2), round(PI95accuracy,2)*100, round(totAcc,2)*100),
CostGrow = c(round(MAE.costgrow,2), NA, round(accuracy.costgrow,2)*100)
)
jpeg(filename=paste0("plots/",flood[f],"/table3.jpeg"),width=600,height=500)
dev.new()
print(paste0("Table 4-", flood[f]))
print(table4)
dev.off()
}
rm(list=ls())
graphics.off()
dir<- commandArgs(trailingOnly=TRUE)
setwd(dir)
flood<- c("flood2014","flood2020","floodfuture")
for(f in 1:length(flood)){
load(paste0("data/",flood[f],"/PI95accuracyMAE.RData"))
load(paste0("data/",flood[f],"/SensSpecAccuracy_.3mflood.RData"))
load(paste0("data/",flood[f],"/CostGrowMAEaccuracySensSpec.RData"))
#Table 4
table4 <- data.frame(
Approach = c("Mean absolute error", "95% prediction interval coverage", "Percent of flooded and nonflooded cells correctly identified"),
PDFlood = c(round(MAE,2), round(PI95accuracy,2)*100, round(totAcc,2)*100),
CostGrow = c(round(MAE.costgrow,2), NA, round(accuracy.costgrow,2)*100)
)
print(paste0("Table 4-", flood[f]))
print(table4)
}
for(f in 1:length(flood)){
load(paste0("data/",flood[f],"/PI95accuracyMAE.RData"))
load(paste0("data/",flood[f],"/SensSpecAccuracy_.3mflood.RData"))
load(paste0("data/",flood[f],"/CostGrowMAEaccuracySensSpec.RData"))
#Table 6
table6 <- data.frame(
Approach = c("Percent of flooded cells correctly identified","Percent of nonflooded cells correctly identified"),
PDFlood = c(round(totalSens,2)*100,round(totalSpec,2)*100),
CostGrow = c(round(sens.costgrow,2)*100, round(spec.costgrow,2)*100)
)
print(paste0("Table 6-", flood[f]))
print(table6)
}
